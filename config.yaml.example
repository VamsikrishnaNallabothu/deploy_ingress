# ============================================================================
# AWS Ingress Inspection Architecture - Configuration
# ============================================================================
# Copy this file to config.yaml and update with your values
# cp config.yaml.example config.yaml
# ============================================================================

# AWS Credentials
AWS_REGION: "us-east-1"
AWS_ACCESS_KEY_ID: "YOUR_ACCESS_KEY_HERE"
AWS_SECRET_ACCESS_KEY: "YOUR_SECRET_KEY_HERE"

# Resource Naming
NAME_PREFIX: "Test"  # All resources will be named: {NAME_PREFIX}-{resource-type}-{suffix}

# Project Configuration
ENVIRONMENT: "dev"

# Availability Zones (must specify at least 2)
AVAILABILITY_ZONES:
  - "us-east-1a"
  - "us-east-1b"

# VPC Configuration
VPC_CIDR: "10.0.0.0/16"
ALB_SUBNET_CIDRS:
  - "10.0.1.0/24"
  - "10.0.2.0/24"
GWLBE_SUBNET_CIDRS:
  - "10.0.11.0/24"
  - "10.0.12.0/24"
WORKLOAD_SUBNET_CIDRS:
  - "10.0.21.0/24"
  - "10.0.22.0/24"

# Gateway Load Balancer Configuration
# REQUIRED: Get this from your security team
GWLB_ENDPOINT_SERVICE_NAME: "com.amazonaws.vpce.us-east-1.vpce-svc-XXXXXXXXXXXXXXXXX"
ENABLE_GWLB_INSPECTION: true

# Application Load Balancer
ALB_INTERNAL: false
ALB_LISTENER_PORT: 80
ALB_LISTENER_PROTOCOL: "HTTP"
ALB_TARGET_PORT: 80
ALB_TARGET_PROTOCOL: "HTTP"
ALB_HEALTH_CHECK_PATH: "/"
ALB_HEALTH_CHECK_INTERVAL: 30
ALB_HEALTH_CHECK_TIMEOUT: 5
ALB_HEALTHY_THRESHOLD: 2
ALB_UNHEALTHY_THRESHOLD: 2
# ALB_CERTIFICATE_ARN: ""  # Required if ALB_LISTENER_PROTOCOL is HTTPS

# Workload Configuration
WORKLOAD_COUNT: 2
WORKLOAD_INSTANCE_TYPE: "t3.micro"
WORKLOAD_KEY_NAME: "my-keypair"  # REQUIRED if WORKLOAD_COUNT > 0
WORKLOAD_ROOT_VOLUME_SIZE: 8
# WORKLOAD_AMI_ID: ""  # Optional - uses latest Amazon Linux 2 if not specified
# WORKLOAD_USER_DATA: ""  # Optional - custom user data script

# VPC Peering (Jumphost Access)
ENABLE_VPC_PEERING: true
JUMPHOST_VPC_ID: "vpc-XXXXXXXXXXXXXXXXX"
JUMPHOST_VPC_CIDR: "10.100.0.0/16"
JUMPHOST_ROUTE_TABLE_IDS:
  - "rtb-XXXXXXXXXXXXXXXXX"

# Security Configuration
ALLOWED_INGRESS_CIDRS:
  - "0.0.0.0/0"  # Allow from anywhere - restrict in production!
SSH_ALLOWED_CIDRS:
  - "10.100.0.0/16"  # Jumphost VPC CIDR

# Optional Features
ENABLE_FLOW_LOGS: true
FLOW_LOGS_RETENTION_DAYS: 7
ENABLE_NAT_GATEWAY: false
ENABLE_DELETION_PROTECTION: false
ENABLE_DETAILED_MONITORING: false

# Brownfield Configuration (set to false for new VPC)
CREATE_VPC: true
CREATE_IGW: true
# EXISTING_VPC_ID: ""  # Required if CREATE_VPC is false
# EXISTING_IGW_ID: ""  # Required if CREATE_IGW is false

# ============================================================================
# Example Configurations
# ============================================================================

# Production Example:
# -------------------
# PROJECT_NAME: "prod-ingress"
# ENVIRONMENT: "prod"
# WORKLOAD_COUNT: 4
# WORKLOAD_INSTANCE_TYPE: "t3.small"
# ENABLE_NAT_GATEWAY: true
# ENABLE_DELETION_PROTECTION: true
# ALB_LISTENER_PROTOCOL: "HTTPS"
# ALB_CERTIFICATE_ARN: "arn:aws:acm:us-east-1:123456789012:certificate/xxxxx"

# Development/Testing Example:
# -----------------------------
# PROJECT_NAME: "dev-test"
# ENVIRONMENT: "dev"
# WORKLOAD_COUNT: 1
# ENABLE_GWLB_INSPECTION: false  # Test without GWLB first
# ENABLE_VPC_PEERING: false
# ENABLE_FLOW_LOGS: false

# Brownfield Example (Existing VPC):
# -----------------------------------
# CREATE_VPC: false
# EXISTING_VPC_ID: "vpc-0123456789abcdef0"
# CREATE_IGW: false
# EXISTING_IGW_ID: "igw-0123456789abcdef0"

